{% extends "index.html" %}

{% block title %}전체 리뷰보기{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/review.css') }}">
{% endblock head %}


{% block section %}
<div id="page-wrapper">


    <section class="review-page">
        <div class="review-banner">
            <h2>리뷰 작성하고 포인트 받으세요!</h2>
            <p>당신의 소중한 경험이 다른 사용자에게 큰 도움이 됩니다.</p>
            <div class="banner-buttons">
                <a href="{{ url_for('view_list') }}">쇼핑 계속하기</a>
                <a href="{{ url_for('select_review', name=name) }}">내 리뷰 작성하기</a>
            </div>
        </div>

        <div class="review-list-section">
            <h2 class="section-title">빌리지 이웃들의 최신 리뷰!</h2>

            <div class="review-list">

                {% if reviews %}
                    {% for key, r in reviews.items() %}
                    <div class="review-card">

                        <a href="{{ url_for('view_review_detail', review_id=key) }}">

                            <img src="{{ url_for('static', filename=r.img_path) }}" alt="리뷰 이미지" height="220">

                            <div class="review-content">

                                <h3>{{ r.title }}</h3>

                                <p>
                                    {% if r.review %}
                                        {{ r.review[:60] }}...
                                    {% else %}
                                        내용 없음
                                    {% endif %}
                                </p>

                                <div class="review-meta">
                                    <span class="author">{{ r.usesr_id }}</span>
                                    <span class="date">
                                        {% if r.created_at %}
                                            {{ r.created_at | int | datetimeformat }}
                                        {% endif %}
                                    </span>
                                </div>

                            </div>

                        </a>

                    </div>
                    {% endfor %}
                
                {% else %}
                    <p>등록된 리뷰가 없습니다.</p>
                {% endif %}
            

            </div>
        </div>

        <nav class="pagination-container" aria-label="Page navigation">

            <ul class="pagination">

                <li class="page-item disabled">
                    <a class="page-link" href="#">&laquo;</a>
                </li>



                <li class="page-item active">
                    <a class="page-link" href="/review?page=1">1</a>
                </li>



                <li class="page-item ">
                    <a class="page-link" href="/review?page=2">2</a>
                </li>



                <li class="page-item ">
                    <a class="page-link" href="/review?page=2">&raquo;</a>
                </li>

            </ul>

        </nav>
    </section>
</div>
{% endblock section%}