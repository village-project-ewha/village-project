{% extends "index.html" %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
{% endblock head %}

{% block section %}
    <div class="swiper mySwiper">

        <div class="swiper-wrapper">

            <div class="swiper-slide">
                <img src="static/resource/Main Banner/Main_Banner_1.png" alt="ë°°ë„ˆ 1">
            </div>
            <div class="swiper-slide">
                <img src="static/resource/Main Banner/Main_Banner_2.png" alt="ë°°ë„ˆ 2">
            </div>
            <div class="swiper-slide">
                <img src="static/resource/Main Banner/Main_Banner_3.png" alt="ë°°ë„ˆ 3">
            </div>

        </div>

        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
    
    </div>

    <section class="product-list-section">
        <h2>ì§€ê¸ˆ ë°”ë¡œ ëŒ€ì—¬ ê°€ëŠ¥í•´ìš”!</h2>
        <div class="product-grid">
            {% if pagination.items %}
                {% for product in pagination.items %}
                <div class="review-card">
                    <a href="/product_detail?id={{ product.id }}">
                        <div class="product-image-wrapper">
                            <img src="{{ url_for('static', filename=product.image_url if product.image_url else 'resource/sample.jpg') }}" alt="{{ product.name }}">
                        </div>
                        <div class="product-info">
                            <h3>{{ product.name }}</h3>
                            <div class="price-group">
                                <span class="price">{{ "{:,.0f}ì›".format(product.price) }}</span><span class="per-day">/ì¼</span>
                                <span class="deposit">ë³´ì¦ê¸ˆ {{ "{:,.0f}ì›".format(product.deposit) }}</span>
                            </div>zzz
                            <div class="meta-info">
                                <span class="comments"><i class="far fa-comment"></i> {{ product.comment_count }}</span>
                                <span class="likes"><i class="far fa-heart"></i> {{ product.like_count }}</span>
                                <span class="trade-type">{{ product.trade_type }}</span>
                            </div>
                        </div>
                    </a>
                </div>
            {% endfor %}


            {% else %}
            <div class="empty-message">
                <p>ì•„ì§ ë“±ë¡ëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤. ğŸ˜¥</p>
                <p>ì²« ë²ˆì§¸ ìƒí’ˆì„ ë“±ë¡í•´ë³´ì„¸ìš”!</p>
            </div>
            {% endif %}
        </div>

        <nav class="pagination-container" aria-label="Page navigation">
        
        <!-- ì´ í˜ì´ì§€ ìˆ˜ê°€ 1ë³´ë‹¤ í´ ë•Œë§Œ ë Œë”ë§ -->
            {% if pagination.pages > 1 %}
            <ul class="pagination">

                <!-- "ì´ì „" í˜ì´ì§€ ë§í¬ -->
                <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
                    <a class="page-link" href="{{ url_for('hello', page=pagination.prev_num) if pagination.has_prev else '#' }}">&laquo;</a>
                </li>

                <!-- í˜ì´ì§€ ë²ˆí˜¸ë“¤ -->
                {% for page_num in pagination.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
                    {% if page_num %}
                        <!-- í˜„ì¬ í˜ì´ì§€ë©´ 'active' í´ë˜ìŠ¤ ì ìš© -->
                        <li class="page-item {% if page_num == pagination.page %}active{% endif %}">
                            <a class="page-link" href="{{ url_for('hello', page=page_num) }}">{{ page_num }}</a>
                        </li>
                    {% else %}
                        <!-- '...' í‘œì‹œ (í˜ì´ì§€ê°€ ë„ˆë¬´ ë§ì„ ë•Œ) -->
                        <li class="page-item disabled"><span class="page-link">...</span></li>
                    {% endif %}
                {% endfor %}

                <!-- "ë‹¤ìŒ" í˜ì´ì§€ ë§í¬ -->
                <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
                    <a class="page-link" href="{{ url_for('hello', page=pagination.next_num) if pagination.has_next else '#' }}">&raquo;</a>
                </li>
            </ul>
            {% endif %} 
        </nav>

    </section>
{% endblock section %}